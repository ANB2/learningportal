<script type="text/javascript">
(function() {
  var page = 1, loading = false;

  function nearBottomOfPage() {
    // return $(window).scrollTop() > $(document).height() - $(window).height() - 10000;
    return $("#content").scrollTop() > $("#content")[0].scrollHeight - $(window).height() - 500;
  }

  $("#content").scroll(function(){
    if (loading) {
      return;
    }

    if (nearBottomOfPage()) {
      loading=true;
      page++;
      $.getScript("http://localhost:5000/?page=" + page, function() { loading = false });
    }
  });
}());
</script>